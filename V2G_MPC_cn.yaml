# ============================================================
# ğŸš— V2G_MPC_ä¸­æ–‡æ³¨é‡Šç‰ˆ.yaml
# å¯¹åº”è®ºæ–‡ï¼š
# Diaz-Londono et al. (2026)
# â€œOpen source algorithms for maximizing V2G flexibility based on MPCâ€
# ------------------------------------------------------------
# æœ¬é…ç½®æ–‡ä»¶å®šä¹‰äº†ç”µåŠ¨æ±½è½¦ä¸é…ç”µç½‘çš„ä»¿çœŸç¯å¢ƒå‚æ•°ï¼Œ
# æ˜¯ eMPC_V2G ç®—æ³•åœ¨ EV2Gym ç¯å¢ƒä¸­å¤ç°è®ºæ–‡ç¬¬5ç« ç»“æœçš„æ ¸å¿ƒè¾“å…¥ã€‚
# ============================================================

simulate_grid: true             # æ˜¯å¦å¯ç”¨ç”µç½‘æ½®æµè®¡ç®—ï¼ˆTrue è¡¨ç¤ºç”¨ PandaPower è®¡ç®—ç”µå‹ã€ç”µæµçº¦æŸï¼‰
                               # â†’ è®ºæ–‡ç¬¬4ç«  Experimental setup æåˆ°åŸºäº LV é…ç”µç½‘è¿›è¡ŒåŠŸç‡æµçº¦æŸã€‚

network_info:                  # ç”µç½‘æ‹“æ‰‘æ–‡ä»¶è·¯å¾„
  nodes_csv: "Nodes_25.csv"     # èŠ‚ç‚¹åæ ‡ã€èŠ‚ç‚¹ç±»å‹å®šä¹‰ï¼ˆ25èŠ‚ç‚¹ä½å‹é…ç”µç½‘ï¼‰
  lines_csv: "Lines_25.csv"     # æ”¯è·¯è¿æ¥ä¸é˜»æŠ—å‚æ•°
                               # â†’ å¯¹åº”è®ºæ–‡ Fig.4 æ‰€ç¤º LV networkã€‚

grid_voltage_base: 400          # ç”µç½‘åŸºå‡†ç”µå‹ï¼ˆV, çº¿ç”µå‹ï¼‰ï¼Œå¯¹åº”400 Vä¸‰ç›¸ç³»ç»Ÿ
power_factor: 0.95              # åŠŸç‡å› æ•°ï¼Œå†³å®šåŠŸç‡åˆ†è§£ä¸ºPã€Q
                               # â†’ è¡¨4ä¸­ â€œPower factor = 0.95â€ã€‚

timescale_minutes: 15           # æ¯ä¸ªä»¿çœŸæ­¥çš„æ—¶é—´é•¿åº¦ï¼ˆ15åˆ†é’Ÿ/æ­¥ï¼‰
simulation_length: 112          # ä»¿çœŸæ€»æ­¥æ•°ï¼ˆçº¦28å°æ—¶ï¼‰
                               # â†’ å¯¹åº”è®ºæ–‡ä¸­1å¤©åœºæ™¯ï¼Œé¢„æµ‹æ—¶åŸŸH=10æ­¥çº¦2.5å°æ—¶ã€‚

scenario: workplace             # åœºæ™¯ç±»å‹ï¼šworkplaceï¼ˆå·¥ä½œæ—¥åœºæ™¯ï¼‰
spawn_multiplier: 5             # EV ç”Ÿæˆå€ç‡ï¼Œ5å€æ‰©å±•ä»¥æ¨¡æ‹Ÿ75è¾†è½¦
                               # â†’ è®ºæ–‡ Fig.4 è¯´æ˜ï¼šâ€œ30 EVSE â‰ˆ 75 EVs connectedâ€ã€‚

v2g_enabled: true               # æ˜¯å¦å¯ç”¨è½¦ç½‘äº’åŠ¨ï¼ˆV2Gï¼‰åŠŸèƒ½
                               # True è¡¨ç¤ºå…è®¸è½¦è¾†æ”¾ç”µï¼ŒFalse è¡¨ç¤ºä»…å……ç”µã€‚
                               # â†’ è®ºæ–‡ä¸»ç®—æ³• eMPC_V2G å¯¹åº”æ­¤é€‰é¡¹ã€‚

number_of_charging_stations: 25 # å……ç”µæ¡©æ•°é‡ï¼ˆæ¯æ¡©æœ€å¤§åŠŸç‡çº¦22 kWï¼‰
                               # â†’ è¡¨4ä¸­ â€œNumber of EVSEs = 25â€ã€‚

power_setpoint_enabled: false   # æ˜¯å¦å¼ºåˆ¶åŠŸç‡å‚è€ƒè·Ÿè¸ªæ¨¡å¼
                               # False è¡¨ç¤ºMPCç®—æ³•è‡ªç”±ä¼˜åŒ–å……æ”¾ç”µåŠŸç‡ã€‚
                               # â†’ è®ºæ–‡ä¸­æ‰€æœ‰å®éªŒå‡ä¸ºä¼˜åŒ–è°ƒåº¦è‡ªç”±æ¨¡å¼ã€‚

# -------------------------------
# âš¡ ç”µç½‘ä¸å˜å‹å™¨çº¦æŸ
# -------------------------------
transformer:
  max_power: 200                # å˜å‹å™¨æœ€å¤§å…è®¸åŠŸç‡ (kW)
                               # â†’ å¯¹åº” Fig.4(d) çº¢çº¿åŠŸç‡é™åˆ¶ï¼›è®ºæ–‡åŸå€¼400kWï¼Œæ­¤å¤„ç¼©æ”¾ä¸º200kWã€‚
  voltage_limit: [0.9, 1.1]     # ç”µå‹ä¸Šä¸‹é™ (pu)
                               # â†’ IEEEæ ‡å‡†èŒƒå›´ï¼Œç”¨äºä¿éšœç”µå‹çº¦æŸã€‚

# -------------------------------
# ğŸ”‹ ç”µåŠ¨æ±½è½¦å‚æ•°
# -------------------------------
ev:
  battery_capacity: 50          # ç”µæ± å®¹é‡ (kWh)
                               # â†’ è¡¨4ä¸­ â€œBattery capacity = 50 kWhâ€ã€‚
  initial_soc_mean: 0.3         # åˆå§‹è·ç”µçŠ¶æ€å¹³å‡å€¼ (30%)
  initial_soc_std: 0.05         # åˆå§‹SOCæ ‡å‡†å·®
  target_soc: 0.9               # ç¦»å¼€å‰ç›®æ ‡SOC
  min_soc: 0.1                  # æœ€ä½SOCçº¦æŸ
  max_soc: 1.0                  # æœ€é«˜SOCçº¦æŸ
  efficiency: 1.0               # å……æ”¾ç”µæ•ˆç‡ (100%)
                               # â†’ è¡¨4ä¸­ Î·_c = Î·_d = 100%ã€‚

  max_charge_power: 22          # æœ€å¤§å……ç”µåŠŸç‡ (kW)
  max_discharge_power: -11      # æœ€å¤§æ”¾ç”µåŠŸç‡ (kW)ï¼Œè´Ÿå·è¡¨ç¤ºæ”¾ç”µ
                               # â†’ eMPCæ”¾ç”µåŠŸç‡ä¸Šé™ï¼Œè®ºæ–‡ Fig.4(b)/(d)ã€‚

  min_time_of_stay: 180         # æœ€çŸ­è¿æ¥æ—¶é—´ (åˆ†é’Ÿ)
                               # â†’ è¡¨4ä¸­ â€œMinimum EV time of connection = 3 hâ€ã€‚

  degradation_model: true       # æ˜¯å¦å¯ç”¨ç”µæ± é€€åŒ–è®¡ç®—
                               # True æ—¶ä¼šè®°å½• Q_loss (Fig.5 ç”µæ± æŸè€—ç›´æ–¹å›¾æ¥æº)ã€‚

# -------------------------------
# âš™ï¸ å……ç”µæ¡© (EVSE) å‚æ•°
# -------------------------------
charging_station:
  voltage: 400                  # é¢å®šç”µå‹ (V)
  max_charge_current: 32        # æœ€å¤§ç”µæµ (A)
  phases: 3                     # ä¸‰ç›¸ç³»ç»Ÿ
  efficiency: 0.98              # å……ç”µæ¡©æ•ˆç‡ (Î·_SE)
                               # â†’ ä¸å®é™…ä¸‰ç›¸å……ç”µæ¡©ä¸€è‡´ã€‚

# -------------------------------
# ğŸŒ ä¸å¯è°ƒè´Ÿè·ä¸å…‰ä¼å‘ç”µæ•°æ®
# -------------------------------
inflexible_loads:
  profile_file: "load_profile.csv"
  scaling_factor: 1.0
                               # èƒŒæ™¯è´Ÿè·æ–‡ä»¶ï¼›è®ºæ–‡ Fig.4(a) çš„è“è‰²èƒŒæ™¯çº¿ã€‚

solar_power:
  profile_file: "pv_generation.csv"
  scaling_factor: 1.0
                               # å…‰ä¼å‡ºåŠ›æ–‡ä»¶ï¼›å½±å“ç”µä»·ä¸å¯å†ç”Ÿç”µé‡éƒ¨åˆ†ã€‚

# -------------------------------
# ğŸ’° ç”µä»·ä¸éœ€æ±‚å“åº”è®¾ç½®
# -------------------------------
day_ahead_prices:
  file: "day_ahead_prices.csv"
  scaling_factor: 1.0
                               # ç”µä»·æ•°æ®ï¼›è®ºæ–‡ Fig.4(a) é¡¶éƒ¨ä»·æ ¼æ›²çº¿å³æ¥æºäºæ­¤ã€‚

discharge_price_factor: 1.0     # æ”¾ç”µä»·æ ¼ç³»æ•° m
                               # åœ¨ run_mpc_experiments.py ä¸­å¾ªç¯æ‰«æ [0.8, 0.9, 1.0, 1.1, 1.2]
                               # â†’ å¯¹åº”è®ºæ–‡ Fig.6 â€œä¸åŒæ”¾ç”µå€ç‡ m ä¸‹çš„ç”¨æˆ·æˆæœ¬åˆ†å¸ƒâ€ã€‚

demand_response:
  event_enabled: true
  event_start_hour_mean: 12     # DRäº‹ä»¶å¹³å‡å¼€å§‹æ—¶é—´ï¼ˆ12ç‚¹ï¼‰
  event_start_hour_std: 2       # å¼€å§‹æ—¶é—´æ‰°åŠ¨
  duration_hours: 2             # äº‹ä»¶æŒç»­æ—¶é—´
  reduction_factor: 0.6         # äº‹ä»¶æœŸé—´å…è®¸åŠŸç‡æ¯”ä¾‹
                               # â†’ è®ºæ–‡ Fig.4(d) çº¢è‰²è™šçº¿åŠŸç‡é™åˆ¶åŒº (DR event)ã€‚

# -------------------------------
# ğŸ§® æ¨¡æ‹Ÿè¿è¡Œæ§åˆ¶
# -------------------------------
random_seed: 0                  # éšæœºç§å­ï¼Œç”¨äºç”ŸæˆEVåˆ°è¾¾ä¸ç¦»å¼€åˆ†å¸ƒ
save_plots: false               # æ˜¯å¦ä¿å­˜ç»˜å›¾
save_replay: false              # æ˜¯å¦ä¿å­˜æ¯æ­¥å›æ”¾æ•°æ®
verbose: true                   # æ˜¯å¦è¾“å‡ºè°ƒè¯•ä¿¡æ¯
                               # â†’ è°ƒè¯•é˜¶æ®µå»ºè®®å¼€å¯ï¼Œè®ºæ–‡å¤ç°æ—¶å¯å…³é—­ä»¥åŠ å¿«è¿è¡Œã€‚

# ============================================================
# ğŸ“˜ æ³¨é‡Šè¯´æ˜ï¼š
# æœ¬é…ç½®æ–‡ä»¶å¤ç°è®ºæ–‡ç¬¬4ç« ä¸ç¬¬5ç« æ‰€æœ‰åŸºç¡€å®éªŒï¼Œ
# åŒ…å«ï¼šç”µä»·æ›²çº¿ã€è´Ÿè·ã€å…‰ä¼ã€DRäº‹ä»¶ã€ç”µæ± å®¹é‡ã€ç”µç½‘çº¦æŸç­‰ã€‚
# æ­é…ä»¥ä¸‹è„šæœ¬å¯å¾—åˆ°å„å›¾ï¼š
#  - Fig.4:  run_mpc_experiments.py + fig4_case_study.py
#  - Fig.5:  run_repro_batch.py ï¼ˆç»Ÿè®¡ç”µæ± é€€åŒ–ï¼‰
#  - Fig.6:  run_repro_batch.py ï¼ˆä¸åŒæ”¾ç”µå€ç‡ mï¼‰
#  - Fig.7:  benchmark_execution_times.py
# ============================================================
