# ===== EV2Gym paper baseline (24h, 15-min steps) =====
timescale: 15
simulation_length: 96

# 必需键（避免 KeyError）
tr_seed: -1                 # -1 表示每次随机；想可复现实验就固定成 0/1/2...
power_setpoint_enabled: False

# 固定一天，保证可复现
random_day: False
year: 2022
month: 1
day: 17
hour: 0
minute: 0

# 场景（论文偏 residential；EV2Gym里用 private 最接近）
# 注意：EV2Gym 中场景键为 public/private/workplace（区分大小写）。
# 论文中的 residential 在这里用 private 最接近。
scenario: private
spawn_multiplier: 5           # 车辆数量强度（调这个以得到 J∈[15,120] 的EV数）

# 价格：放电价系数 m（论文做敏感性分析），先设 1.0
discharge_price_factor: 1.0   # 表：m ∈ [0.8, 1.2]，默认 1.0

# 不跑潮流：只用聚合的变压器约束/事件
simulate_grid: False

# 充电网络（聚合）
v2g_enabled: True
number_of_charging_stations: 20   # 表：I ∈ [5,50]，默认给中位数 20
number_of_transformers: 1         # 表：G ∈ {1,3}
number_of_ports_per_cs: 1
charging_network_topology: None

# 需求响应（DR）——论文风格：每天1次、60min、18±1点、下调20%
demand_response:
  include: True
  events_per_day: 1
  event_capacity_percentage_mean: 20
  event_capacity_percentage_std: 0
  event_length_minutes_min: 60
  event_length_minutes_max: 60
  event_start_hour_mean: 18
  event_start_hour_std: 1
  notification_of_event_minutes: 60

# 负荷与光伏（有5%预测误差）
inflexible_loads:
  include: True
  inflexible_loads_capacity_multiplier_mean: 1.0  # ← 新增的必需键
  forecast_mean: 100
  forecast_std: 5

solar_power:
  include: True
  solar_power_capacity_multiplier_mean: 1.0       # ← 新增的必需键
  forecast_mean: 100
  forecast_std: 5


# 变压器功率上限（论文默认）
transformer:
  max_power: 400     # kW

# EV/桩参数（论文默认）
heterogeneous_ev_specs: False
ev:
  # 论文默认参数
  battery_capacity: 50           # kWh
  max_ac_charge_power: 22        # kW
  max_dc_charge_power: 22        # kW
  max_discharge_power: -22       # kW（放电为负）
  min_ac_charge_power: 0
  min_discharge_power: 0
  charge_efficiency: 1
  discharge_efficiency: 1
  transition_soc: 1              # 1 表示不进入CCCV分段
  transition_soc_multiplier: 5   # ← 常被读取，补上默认值
  ev_phases: 3                   # ← 这是这次缺的键

  # 逗留与安全约束
  min_battery_capacity: 5        # kWh (10% of 50 kWh)
  min_time_of_stay: 180          # min
  min_emergency_battery_capacity: 5
  desired_capacity: 0.8


charging_station:
  min_charge_current: 0
  max_charge_current: 32
  min_discharge_current: 0       # 注意：放电方向用负电流，最小值通常写 0
  max_discharge_current: -32     # 放电上限（负数）
  voltage: 230
  phases: 3


# 功率设定跟踪的宽松度（先给 20%，更稳）
power_setpoint_flexiblity: 20
